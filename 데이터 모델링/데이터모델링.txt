
  :: 데이터 모델링 실습

   
  데이터를 저장, 관리하는 테이블을 설계하는 과정 

  "프로젝트의 목표 달성을 위한 일련의 과정중 데이터를 다루고, 취급하는

경우에 복잡한 시스템을 개발할때 --> 모델링 (복잡한 업무를 --> 단순화)

  ex> 건축 ==> 집을 설계한다 ==> 설계도를 그려낸다 ==> 시공 ==> 완료!


  I. 모델링 단계

  - 약식으로 구분   vs  소프트웨어 개발 방법론 (ex. 폭포수 모델)

   1) 요구사항 분석        [요구사항 분석]
   2) 개념 모델링                     [설계]
   3) 논리 모델링                         [구현]  
   4) 물리 모델링                            [검증]
                                                 [완료]


  ※ 데이터 모델링은 이해 관계자들이 함께 취급 : 어떤 직무의 전유물~

     [DBA]나 [데이터모델러]만이 모델링에 참여하는게 아닌, 발주자,
     개발자, 디자이너 등 그리고 그밖의 전공자가 아닌 최종사용자등도
     함께 작성하거나 공유할 수 있음.


  II. 참고용 교안

  - 책 2권 지급 (예정)

  - PDF 파일  (https://www.ncs.go.kr)

  ※ 바로가기 주소
https://www.ncs.go.kr/unity/hmn01/hmn0101/ncsResultSearch.do?dutySvcNo=SVC202000222&ncsClCd=2001020401_19v4&ncsLclasCd=20&ncsMclasCd=01&ncsSclasCd=02&ncsSubdCd=04&ncsCompeUnitCd=01&doCompeUnit=true&output=ncsRsnInfo


  ※ 개념 모델 실습용 도구

    https://draw.io   [주소 변경됨]  https://app.diagrams.net

  
   III. 모델링 실습 (프로젝트 단위)

   1. 프로젝트 계획

   2. 요구사항 수집

   3. 요구사항 분석 <---> 업무 파악 : 추상적 개념을 구체화하는 과정


     ex> 수강신청 시스템을 개발하고자 한다~

         제안서, 기획서 관련 내용을 읽어보고 ~ 파악하는 과정


     ex> 쇼핑몰 구축하고자 한다.

     ex> 게시판을 만들고자 한다

     ex> ERP를 구축하고자 한다.


    ※ 요구사항 수집 --> 분석 : 개발자 업무x 다만, 협조는 가능~
   
   4. 데이터 모델링

   4-1) 개념 모델링 : ERD (Entity Relationship Diagram) / 엔터티간 관계를

     도식화 하는 과정 ==> 간단, 명료하게

    HR   ==> Human Resource   : 인사관리 부서의 업무를 모델링의 결과

    ※ 오라클 샘플 스키마중 HR, SH는 독립설치 가능하고 나머지는~

      설치용 script를 이용해서 한번에 설치 (종속 관계)


    예) [한울] 인사관리부서의 업무(=주제영역) 파악

       - 사원 (정보)를 등록한다,
       -       "       수정한다.   ===> (사원, 부서, 교육과정 등)등록, 관리 업무!
       -       "       관리한다.
       - 부서    "      "

   ※ (단순/복합) 명사를 사용             vs            동사를 사용

        [엔터티] [애트리뷰트]                       [관계(릴레이션)]

         Entity    Attribute                        Relation/Relationship

        □: 엔터티 ,  ○  : 속성                           ◇ 

   ※ 복합명사를 사용할 수 있으나, 도메인을 제한하지 않도록 유의

   ※  엔터티(Entity) : 업무가 관여하는 어떤 것 --> 단순명사

       애트리뷰트(Attribute) : 업무가 갖는 성격, 특성 --> 단순명사(원자성)
          └ 도메인 범위 : 부서이름 ==> 문자로 작성해야 함.

       릴레이션(Relationship) : 엔터티와 엔터티간의 관계 --> 동사
          └ ex. A라는 회사의 업무중, 부서와 사원의 관계 
             
              - 부서는 사원을 포함한다 / 부서에 사원이 소속된다.
              - 사원이 부서에 소속된다. / 사원이 부서에 포함된다.

          └ ex. B라는 쇼핑몰의 업무중,  고객과   상품의 관계
              
              - 고객은 상품을 주문한다.
              - 상품은 고객에 의해 주문되어진다.


   ※ 가급적 실제 업무에서 사용하는 용어를 선택 ==> 모든 업무를 파악할 수 없으나,..
    
   ※ draw.io 를 활용하고, 파워포인트 또는 수기로 작성!

   ※ ERD 작성 도구
     
      - Erwin : 오래된 도구이지만, 대학교 수업이나 업무등에서 사용

      - ERmaster(=Eclipse 애드온) 
          └ https://ermaster.sourceforge.net 에서 다운받고, 설치방법 메뉴얼을
             참고해서 이클립스에 추가하여 사용가능함.
     
      ※ 개발자 : sqlDeveloper 사용 (modeler 기능이 탑제되어 있음)

         DBA, 모델러 : sqlModeler 사용 (GUI)  / SQLPLUS 사용 (CLI)


                  
  4-2) 논리 모델링 : 개념 모델을 참고하여 ERD를 테이블로 변환하는 과정

  ※ 단순 테이블 변환이 목적이 아닌 데이터 정규화, 반정규화등을 통해서

     추상적인 개념을 구체화 하는데 그 목적이 있고, 특히 개념모델에서 관계의

     기수성 (Cardinality) N : M의 관계를 해소하는 데 목적이 있다고 볼 수 있음.

  ※ 모델링시 기수성 표시는 보통 IE/Crows's Foot(=까치발) 형태를 사용, 때로는

     Barker의 표기법을 사용하지만 둘다 거의 비슷함.

     ex> 게시판     ---   포함한다(되어진다)  -- 게시글

           1                      :                 N      <가장 이상적인..>

 
     ex> 학생 엔터티   --- 수강한다(되어진다) --- 교과목 엔터티

             N                    :                  M    <복잡도 증가, 단순화필요>

   
         이것을 1:N의 관계로 해소하려면,     1)학생 엔터티     3) 교과목 엔터티
                                              
                                                       2)수강엔터티

         형태로, 다시 모델링을 수행, 아래와 같이 변경하는 과정


          학생                   수강                교과목
         -----------------     -----------------    -----------------
          학생 아이디(PK)      학생 아이디(FK)       교과목 코드(PK)
          학생 이름            교과목 코드(FK)       교과목명
          학생 연락처          수강일자              교과목 수강자
              ...                  ...                  ...
 
     ※ 개념 모델링과 논리 모델링(=모델을 만드는 과정)을 보통 논리 모델,모델링으로

        구분하기도 함.

        요구사항 분석 ------->      논리 모델링       --------> 물리 모델링
                               (개념모델링+논리모델링)

     ※ 논리 모델링 과정은 개념 모델에서 파악한 엔터티, 애트리뷰트, 릴레이션을
        
        데이터베이스 모델과 맵핑 시키는 과정, 

              논리 모델링         |     물리모델링
        --------------------------|------------------------
          엔터티(Entity)          |  테이블(Table)
          애트리뷰트(Attribute)   |  컬럼(Column)
          릴레이션(Relation)      |  식별자(PK, FK)
        --------------------------|------------------------

    ※ 엔터티는 애트리뷰트들의 집합(=Group)적인 특성을 고려하여 작명

       원자성을 고려하여 엔터티가 갖는 성격,특성은 애트리뷰트로 작명

       릴레이션은 테이블간의 계층구조(=상하, 수직,부모-자식)를 고려해야 함.
    
    ※ 식별관계(ERD에서 실선 표기) vs 비식별 관계(ERD에서 점선 표기)

       부모 테이블의 PK가 자식 테이블의 FK로 포함되는 과정
         └부모 테이블의 PK를 자식테이블에서 데이터를 식별하는데 사용하면 식별관계
         └            "                            "            하지않으면 비 "

    ※ 비식별 관계  
                
        ex> HR 계정의    Employees 테이블에서 사원과 매니저의 관계 (Self Join문제)

            employee_id는 사원을 식별하는 식별자, 기본키(PK)

            manager_id는 매니저(=도 사원)을 일반 속성으로 으로 사용하였음
             └ 사원들은 매니저가 있는 사원과 매니저가 없는 사원이 있음
             └ 사장인 Steven King은 manager_id 가 NULL
             └ 사원들은 사장-매니저-사원 순서로 계층구조를 형성하고 있음

        ex> 보통 BOM(=Bill of Material) 구조에서 확인가능

             item_id  item_name  parent_id  item_qty
               100      컴퓨터     (NULL)      1
               101      본체        100        1
               102      모니터      100        1
               103      스피커      100        1
               104      CPU         101        1
               105      RAM         101        2
               106      그래픽카드  101        1
               107      CD롬        101        1 
               108     키보드       100        1
               109     마우스       100        1 
 
                   

    ※ 계층 구조를 쉽게 파악할 수 있는 계층형 쿼리(Hirerachical Query)를 

       오라클 전용 문법이 존재함.

    -- HR 스키마의 사원 테이블(employees)을 계층구조로 조회해보는 예제

        SELECT  'ORACLE' COMPANY,  employee_id, 
                LPAD(' ', 2 * (LEVEL-1)) || e.first_name name, 
                e.manager_id,
                e.department_id,
                d.department_name
        FROM employees e, departments d
        WHERE   e.department_id = d.department_id
        START WITH e.manager_id IS NULL         -- 시작점 / 루트 노드 찾기
        CONNECT BY PRIOR e.employee_id =  e.manager_id; 
                

    ※ 식별자는 각 테이블의 데이터 행을 유일하게 식별하는 속성

        - 기본키/주키(PK) :  UNIQUE + NOT NULL
        - 후보키  : 기본키가 될 수 있는 속성 (회원 아이디 vs 주민등록번호)
        - 대체키 : 둘 이상의 후보키중 기본키가 아닌(=기본키로 선택되지않은)후보 키
        - 인조 키 : 인위적인 키 (게시물 번호 vs 게시물 아이디)
        - 복합 키 : 둘이상의 속성을 이용해 식별하는 키
        - 슈퍼키 : 유일하게 식별할수 있는 식별자를 조합한 키
        - 외래키 : 부모 테이블의 기본키를 참조해 식별하는 키



   4-3) 물리 모델링


      4-3-1.논리 모델링 후 실제 데이터를 담는 테이블을 만드는 DDL을 작성하는 과정,

      sqlDEVELOPER 에서는 [보기 > Data Modeler]를 통해 GUI 환경에서도 작업 가능

      데이터에 따른 타입(data type), 용량(길이)등을 고려하여 저장

      ※ Data Modeler를 이용해 데이터 딕셔너리(=데이터 사전)의 스키마(ex.HR)에
   
         정의된 데이터 모델을 살펴보거나 DDL, 이미지등의 형태로 내보낼 수 있음


      4-3-2.DDL작성 - 데이터 베이스 객체(테이블, 뷰, 시퀀스, 트리거 등등..)을 다룸

       - CREATE :  생성

       - ALTER :  변경 (컬럼추가/삭제, 제약조건 추가, 데이터타입 변경 등)

       - DROP :   삭제

   5. 구현

      서비스 구현  ==> 게시물 등록 서비스 : 게시판

                       쇼핑몰 상품등록 서비스  : 상품관리 프로그램 개발



   6. 구축

    DBMS 구축 --> Oracle    vs   MySQL  : 비용, 유지보수등의 난이도 외 여러가지

    제반사항을 고려해 데이터베이스 시스템(DBMS)를 선택하고 서버/클라이언트 모델을

    구축하여 서비스를 준비함

   
   7. 배포

    서비스 --> 온라인(웹/앱), 오프라인(인트라넷)  --> 발주자/최종사용자의 요구에

    맞게 배포방법, 배포시기, 배포 인프라등을 결정함. 

   ※ 배포전에 프로젝트 수행 목적에 맞게 서비스나 데이터베이스가 구축되었는지

      검증하는것은 기본!

   
   :: 요약

   프로젝트(서비스 개발, 구축, 기능 추가)에 따라 데이터베이스를 구축해야할 경우

   단순히 테이블만 만들고 데이터만 삽입하는 경우가 대부분 (개발자 과정) 이나,

   실제 DBA나 전문 모델러의 영역이 '데이터 모델링'과정을 이해하고 실습해 봄으로써

   이해관계자로써 해당 업무 또는 나아가 관련 업무를 수행하는데 도움이 될 수 있음


   교육중 프로젝트, 미니프로젝트, 사이드프로젝트의 경우 이러한 모델링 과정 없이,

   작업을 하는 수 밖에 없지만 가급적이면 '데이터 모델링'전반을 경험하는 것이 

   좋겠음.

   ※ 이해 관계자 (개발자, DBA, 디자이너등의 관련 업무 종사자와 최종사용자/발주자)

      들이 교차검증 하는 것이 좋지만,..(현실적으로 DBA는 있으나 모델러가 없는..)

      환경에 따름.



       [1]              [2]           [3]      [4]       [5]     [6]      [7]
  프로젝트 계획 --> 요구사항 수집 --> 분석 --> 설계 --> 구현 --> 구축 --> 배포..

                    [개념 모델링]      [논리모델링]     [물리모델링]

                    [ Entity Relationship Diagram,ERD ] [테이블][DB][DBMS] [서비스]


  ※ 소프트웨어 개발 방법론 (폭포수 모델, XP, 애자일)등을 검색하세요~














      













